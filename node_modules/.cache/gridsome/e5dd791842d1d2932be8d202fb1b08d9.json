{"remainingRequest":"/Users/mbj/projects/unigrade/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mbj/projects/unigrade/src/pages/Nft.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/mbj/projects/unigrade/src/pages/Nft.vue","mtime":1647705374434},{"path":"/Users/mbj/projects/unigrade/node_modules/css-loader/dist/cjs.js","mtime":1641848850615},{"path":"/Users/mbj/projects/unigrade/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1641067260321},{"path":"/Users/mbj/projects/unigrade/node_modules/gridsome/node_modules/postcss-loader/src/index.js","mtime":1641067260268},{"path":"/Users/mbj/projects/unigrade/node_modules/sass-loader/dist/cjs.js","mtime":1641898020982},{"path":"/Users/mbj/projects/unigrade/node_modules/cache-loader/dist/cjs.js","mtime":1641848850514},{"path":"/Users/mbj/projects/unigrade/node_modules/vue-loader/lib/index.js","mtime":1641067260321}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.nft {\n  min-height: 600px;\n}\n.wallet {\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n}\n.pool-container {\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n}\n.dark {\n  .wallet {\n    background: rgba(0, 0, 0, 0.25);\n    backdrop-filter: blur(10px);\n  }\n  .pool-container {\n    background: rgba(0, 0, 0, 0.25);\n    backdrop-filter: blur(10px);\n  }\n}\n",{"version":3,"sources":["Nft.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Nft.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <Layout>\n    <div class=\"nft\">\n      <div\n        class=\"wallet tw-fixed tw-top-20 tw-h-20 tw-left-0 tw-w-full tw-z-10\"\n      >\n        <div\n          class=\"\n            tw-flex tw-justify-center tw-mt-4\n            md:tw-justify-end md:tw-mr-20\n          \"\n        >\n          <connect-wallet />\n        </div>\n      </div>\n      <div\n        class=\"\n          pool-container\n          tw-p-6 tw-mt-44\n        \"\n      >\n        <div class=\"selections tw-mb-2 tw-flex tw-w-full tw-justify-between\">\n          <div>{{ viewOptionsActive }}</div>\n          <div class=\"tw-justify-items-end\">\n            <!--fancy-select /-->\n            <fancy-options\n            :options=\"viewOptions\"\n            :active=\"viewOptionsActive\"\n            @click=\"option => (viewOptionsActive = option)\"\n          />\n          </div>\n\n        </div>\n        <div class=\"tw-flex tw-flex-rows tw-flex-wrap tw-justify-center\">\n          <card\n            v-for=\"(pool, index) in poolsSample\"\n            :key=\"'s' + index\"\n            :isSpecial=\"pool.isReadyToClaim\"\n            :isDisabled=\"pool.isPoolClosed\"\n            :alert=\"pool.status\"\n            :image=\"pool.image\"\n            :video=\"pool.video\"\n            :display=\"viewOptionsActive\"\n            :buttonText=\"pool.action\"\n            :class=\"[\n            viewOptionsActive === 'list' ? 'tw-w-full' : '',\n            !pool.isPoolClosed ? 'hover:tw-opacity-75 tw-cursor-pointer': ''\n            ]\"\n          >\n            <template #title>{{ pool.name }}</template>\n            <template #headerRightBottom\n              >Balance</template\n            >\n            <template #bodyLeftBottom\n              >Daily emission</template\n            >\n            <template #bodyRightBottom>{{ pool.brand }}</template>\n            <template #bodyCenterTop\n              >{{ pool.symbolCurrency }}{{ pool.jackpot }}</template\n            >\n            <template #bodyCenterBottom\n              >Total Value Locked</template\n            >\n            <template #bodyRightTop\n              >{{ pool.symbolCurrency }}{{ pool.jackpot }}</template\n            >\n            <template #bodyLeftTop>{{ pool.code }}</template>\n            <template #headerRightTop>{{ pool.balance }}</template>\n            <template #action>{{ pool.action }}</template>\n            <template #titleDisabled>\n              migration in progress\n            </template>\n            <template #descriptionDisabled>\n              pool is closed\n            </template>\n          </card>\n        </div>\n      </div>\n    </div>\n  </Layout>\n</template>\n\n<script lang=\"ts\">\nimport { Vue, Component, Watch } from \"vue-property-decorator\";\nimport axios from \"axios\";\nimport ConnectWallet from \"~/components/molecules/connect-wallet.vue\";\nimport Card from \"~/components/molecules/card.vue\";\nimport FancyOptions from \"~/components/molecules/fancy-options.vue\";\nimport FancySelect from \"~/components/atoms/fancy-select.vue\";\nimport MoralisStrategy from \"~/web3/strategies/moralis.strategy\";\nimport PoolDeployer from \"~/web3/contracts/PoolDeployer\";\nimport NftPool from \"~/web3/contracts/NftPool\";\nimport NftFactory from \"~/web3/contracts/NftFactory\";\n\nexport interface PoolAttribute {\n  trait_type: string;\n  value: string;\n}\n\nexport interface Pool {\n  animation_url: string;\n  name: string;\n  address: string;\n  type: string;\n  decription: string;\n  external_url: string;\n  image: string;\n  attributes: PoolAttribute[];\n}\n\nexport interface PoolExtraData {\n  farming?: boolean;\n  balance?: number;\n  claimRewards?: boolean;\n  paused?: boolean;\n  whitelisted?: boolean;\n  game?: string;\n}\n\n@Component({\n  components: { ConnectWallet, Card, FancyOptions, FancySelect }\n})\nexport default class Nft extends Vue {\n  pools: Pool[] = [];\n  poolExtra: Record<string, PoolExtraData> = {};\n  viewOptions = [\"list\", \"column\"];\n  viewOptionsActive = \"column\";\n\n  poolsSample = [\n    {\n      name: \"Blue Coat \",\n      jackpot: \"16,928\",\n      action: \"social\",\n      status: \"\",\n      symbolCurrency: \"$\",\n      isPoolClosed: true,\n      brand: \"TVL\",\n      code: \"224\",\n      isReadyToClaim: false,\n      balance: 233,\n      video: \"https://nft-testing.ridotto.io/platform/video/1.mp4\",\n      image:\n        \"https://images.unsplash.com/photo-1601042879364-f3947d3f9c16?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8MXw5NjA2OTYwfHxlbnwwfHx8fA%3D%3D&w=1000&q=80\"\n    },\n    {\n      name: \"Blue Coat \",\n      jackpot: \"16,928\",\n      action: \"social\",\n      status: \"Claim Reward\",\n      symbolCurrency: \"$\",\n      isPoolClosed: false,\n      brand: \"TVL\",\n      code: \"224\",\n      isReadyToClaim: true,\n      balance: 233,\n      video: \"https://nft-testing.ridotto.io/platform/video/1.mp4\",\n      image:\n        \"https://images.unsplash.com/photo-1601042879364-f3947d3f9c16?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8MXw5NjA2OTYwfHxlbnwwfHx8fA%3D%3D&w=1000&q=80\"\n    }\n  ];\n  created() {\n    for (let i = 1; i <= 10; i++)\n      this.poolsSample.push({\n        name: \"Blue Coat \" + i,\n        jackpot: \"16,928\",\n        action: \"social\",\n        status: \"\",\n        symbolCurrency: \"$\",\n        isPoolClosed: false,\n        brand: \"TVL\",\n        code: \"224\",\n        isReadyToClaim: false,\n        balance: i,\n        video: \"https://nft-testing.ridotto.io/platform/video/1.mp4\",\n        image:\n          \"https://images.unsplash.com/photo-1601042879364-f3947d3f9c16?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8MXw5NjA2OTYwfHxlbnwwfHx8fA%3D%3D&w=1000&q=80\"\n      });\n  }\n\n  get isLoaded() {\n    return this.$store.state.web3.loaded;\n  }\n\n  get walletConnected() {\n    return this.$store.state.web3.walletConnected;\n  }\n\n  async mounted() {\n    const moralisStrategy = new MoralisStrategy();\n    this.$store.dispatch(\"web3/initLoad\", moralisStrategy);\n  }\n\n  async loadNFTs() {\n    console.log(\n      \"this.$store.state.connector\",\n      this.$store.state.web3.connector.context\n    );\n    console.log(\"bef pool count\");\n    const poolCount = await PoolDeployer.poolCount(\n      this.$store.state.web3.chain,\n      this.$store.state.web3.connector.context\n    );\n\n    console.log(\"pool count\", poolCount);\n\n    for (const count of Array(Number(poolCount)).keys()) {\n      console.log(count, poolCount);\n      const addressNftPool = await PoolDeployer.allPools(\n        this.$store.state.web3.chain,\n        this.$store.state.web3.connector.context,\n        count\n      );\n\n      const stakingStart = await NftPool.stakingStart(\n        this.$store.state.web3.chain,\n        addressNftPool,\n        this.$store.state.web3.connector.context\n      );\n      console.log(\"stakingStart:>>> \", stakingStart);\n      if (stakingStart > 0) {\n        const typeNft = await NftPool.typeNFT(\n          this.$store.state.web3.chain,\n          addressNftPool,\n          this.$store.state.web3.connector.context\n        );\n\n        const uri = await NftFactory.uri(\n          this.$store.state.web3.chain,\n          this.$store.state.web3.connector.context,\n          typeNft\n        );\n\n        const { data } = await axios(uri);\n        console.log(\"respource: \", addressNftPool, typeNft, uri, data);\n        this.pools = [\n          ...this.pools,\n          {\n            animation_url: data.animation_url,\n            address: addressNftPool,\n            decription: data.decription,\n            external_url: data.external_url,\n            image: data.image,\n            attributes: data.attributes,\n            name: data.attributes.find(\n              (att: PoolAttribute) => att.trait_type === \"game\"\n            ).value,\n            type: data.attributes.find(\n              (att: PoolAttribute) => att.trait_type === \"type\"\n            ).value\n          }\n        ];\n      }\n    }\n  }\n\n  extraInfo(pool: Pool) {\n    return this.poolExtra[pool.address] ? this.poolExtra[pool.address] : {};\n  }\n\n  async isPaused(pool: Pool) {\n    return await NftPool.paused(\n      this.$store.state.web3.chain,\n      pool.address,\n      this.$store.state.web3.connector.context\n    );\n  }\n\n  async balancePool(pool: Pool, address: string) {\n    return await NftPool.balances(\n      this.$store.state.web3.chain,\n      pool.address,\n      this.$store.state.web3.connector.context,\n      address\n    );\n  }\n\n  @Watch(\"isLoaded\")\n  async isLoadedWatcher(value: boolean) {\n    if (value) {\n      try {\n        // await this.loadNFTs();\n      } catch (err) {\n        this.$store.dispatch(\"error\", err);\n      }\n    }\n  }\n\n  @Watch(\"walletConnected\")\n  async walletConnectedWatcher(value: boolean) {\n    if (value) {\n      this.pools.forEach(async pool => {\n        this.poolExtra[pool.address] = {\n          ...this.poolExtra[pool.address],\n          balance: await this.balancePool(pool, this.$store.state.web3.account)\n        };\n        console.log(this.poolExtra[pool.address]);\n        // execute this when wallet is connected\n      });\n    }\n  }\n\n  @Watch(\"pools\")\n  async poolsWatcher(pools: Pool[]) {\n    if (pools) {\n      pools.forEach(async pool => {\n        this.poolExtra[pool.address] = {\n          ...this.poolExtra[pool.address],\n          paused: await this.isPaused(pool)\n        };\n        /*\n          // execute this when wallet is connected\n          const balances = await NftPool.balances(\n            this.$store.state.web3.chain,\n            pool.address,\n            this.$store.state.web3.connector.context,\n            0\n          );\n          console.log(\"balances>>> \", balances);\n          pool.balances = balances;\n        */\n      });\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.nft {\n  min-height: 600px;\n}\n.wallet {\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n}\n.pool-container {\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n}\n.dark {\n  .wallet {\n    background: rgba(0, 0, 0, 0.25);\n    backdrop-filter: blur(10px);\n  }\n  .pool-container {\n    background: rgba(0, 0, 0, 0.25);\n    backdrop-filter: blur(10px);\n  }\n}\n</style>\n"]}]}